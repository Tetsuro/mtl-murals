"use strict";var mtlMurals=function(){function t(){p=new google.maps.Map(document.getElementById("map")),$.when(e()).done(function(){m.html(g),c.html(g),i(),p.addListener("dragend",n),p.addListener("zoom_changed",n)})}function e(){return $.ajax({dataType:"json",cache:!1,url:"https://proxy.hackeryou.com",data:{reqUrl:o,xmlToJSON:!1},success:a})}function a(t){var e=t.features;g=e.length;var a=new google.maps.LatLngBounds;e.forEach(function(t,e){var n=t.properties.latitude,i=t.properties.longitude,o=t.properties.image,d=t.properties.adresse,s=new google.maps.Marker({position:{lat:t.properties.latitude,lng:t.properties.longitude},map:p,title:d,animation:google.maps.Animation.DROP,id:e}),u=new google.maps.LatLng(n,i);a.extend(u),f.push(s),s.addListener("click",function(){r.html(d),l.attr("src",o)})}),p.fitBounds(a)}function n(){var t=p.getBounds();h=0,f.forEach(function(e){t.contains(e.position)?($("[data-index="+e.id+"]").show(),h++):$("[data-index="+e.id+"]").hide()}),m.html(h)}function i(){f.forEach(function(t){var e=document.createElement("li"),a=document.createElement("button");e.classList.add(s),e.setAttribute("data-index",t.id),d[0].appendChild(e),e.appendChild(a),a.classList.add(u),a.innerHTML=t.title})}var o="http://donnees.ville.montreal.qc.ca/dataset/53d2e586-6e7f-4eae-89a1-2cfa7fc29fa0/resource/d325352b-1c06-4c3a-bf5e-1e4c98e0636b/download/murales.json",r=$(".mural-info__title"),l=$(".mural-info__image"),d=$(".mural-list"),s="mural-list__item",u="mural-list__button",c=$(".mural-count__total"),m=$(".mural-count__visible"),p={},f=[],g=0,h=void 0;return{initMap:t}}();mtlMurals.initMap();